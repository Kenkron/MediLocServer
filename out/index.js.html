<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//a list of clients that might report populations on the 'map'
var socket = io();

broadcasterRegistry = {};
beaconRegistry = {};

var renderCallback = null;

//Socket event handlers
//---------------------

socket.on('broadcaster', data => {
    data = JSON.parse(data);
    console.log('broadcaster ' + data.id);
    broadcasterRegistry[data.id] = data;
    if (renderCallback) {
        renderCallback();
    }
});

socket.on('deleteBroadcaster', data => {
    console.log('deleting broadcaster ' + data);
    delete broadcasterRegistry[data];
    if (renderCallback) {
        renderCallback();
    }
});

socket.on('beacon', data => {
    data = JSON.parse(data);
    console.log('beacon ' + data.id);
    beaconRegistry[data.id] = data;
    if (renderCallback) {
        renderCallback();
    }
});

socket.on('deleteBeacon', data => {
    console.log('deleting beacon ' + data);
    delete beaconRegistry[data];
    if (renderCallback) {
        renderCallback();
    }
});

/**Gets the root url of the server this page is hosted on
 *
 * @return the root url
 */
function hostUrl() {
    var pathArray = location.href.split('/');
    var protocol = pathArray[0];
    var host = pathArray[2];
    return protocol + '//' + host;
}

(function() {
    'use strict';

    var app = angular.module('app', [
        'ui.router',
        'ngMaterial'
    ]);

    app.config(['$stateProvider', function($stateProvider) {

        //Not implemented right now
        // $stateProvider.state('login', {
        //     url: '/login',
        //     templateUrl: 'login.html',
        //     controller: 'loginController'
        // });

        $stateProvider.state('map', {
            url: '/map',
            templateUrl: 'map.html',
            controller: 'mapController'
        });

        $stateProvider.state('broadcasters', {
            url: '/broadcasters',
            templateUrl: 'broadcasters.html',
            controller: 'broadcastersController'
        });
    }]);

    app.run([
        '$state',
        function($state) {
            $state.go('map');
        }
    ]);
})();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BeaconFloor.html">BeaconFloor</a></li><li><a href="BeaconMap.html">BeaconMap</a></li></ul><h3>Global</h3><ul><li><a href="global.html"></a></li><li><a href="global.html#beaconMatches">beaconMatches</a></li><li><a href="global.html#colorAlpha">colorAlpha</a></li><li><a href="global.html#hashString">hashString</a></li><li><a href="global.html#hostUrl">hostUrl</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Apr 12 2017 12:26:23 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
